{% extends 'ProyectoTiendaApp/base.html' %}
{% load static %}
{% block content %}
<div class="container my-4">
<div class="row">
<aside class="col-md-3 mb-4">
<h5 class="mb-3">Categorías</h5>
<ul class="list-group">
<li class="list-group-item {% if not categoria_activa %}active{% endif %}">
<a class="text-reset text-decoration-none d-block" href="{% url 'informacion:lista' %}">Todas</a>
</li>
{% for c in categorias %}
<li class="list-group-item {% if categoria_activa and categoria_activa.pk == c.pk %}active{% endif %}">
<a class="text-reset text-decoration-none d-block" href="{% url 'informacion:por_categoria' c.slug %}">{{ c.titulo }}</a>
</li>
{% empty %}
<li class="list-group-item">Sin categorías</li>
{% endfor %}
</ul>
</aside>


<section class="col-md-9">
<div class="row row-cols-1 row-cols-md-3 g-4">
{% for post in posts %}
<div class="col">
<div class="card h-100">
{% if post.imagen %}
<img src="{{ post.imagen.url }}" class="card-img-top" alt="{{ post.titulo }}">
{% endif %}
<div class="card-body">
<h5 class="card-title">{{ post.titulo }}</h5>
<p class="card-text text-muted small mb-2">
{{ post.created|date:'d M Y' }} · por {{ post.autor.get_username }}
</p>
<a href="{% url 'informacion:detalle' post.slug %}" class="btn btn-outline-dark btn-sm">Leer más</a>
</div>
</div>
</div>
{% empty %}
<div class="col">
<div class="alert alert-secondary">No hay publicaciones aún.</div>
</div>
{% endfor %}
</div>


{% if is_paginated %}
<nav class="mt-4">
<ul class="pagination">
{% if page_obj.has_previous %}
<li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Anterior</a></li>
{% endif %}
<li class="page-item disabled"><span class="page-link">Página {{ page_obj.number }} de {{ paginator.num_pages }}</span></li>
{% if page_obj.has_next %}
<li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Siguiente</a></li>
{% endif %}
</ul>
</nav>
{% endif %}


</section>
</div>
</div>
{% endblock %}